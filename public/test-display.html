<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webページ表示テスト - NeoN VJ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <main class="container mx-auto px-4 py-8">
        <h1 class="text-2xl font-bold mb-6">Webページ表示テスト</h1>
        
        <div class="bg-gray-800 rounded-lg p-6 mb-6">
            <h2 class="text-lg font-semibold mb-4">イベント情報</h2>
            <div id="eventInfo">
                <p>イベント名: <span id="eventName" class="text-purple-400">読み込み中...</span></p>
                <p>楽曲数: <span id="songCount" class="text-blue-400">読み込み中...</span></p>
            </div>
        </div>
        
        <div class="bg-gray-800 rounded-lg p-6">
            <h2 class="text-lg font-semibold mb-4">楽曲リスト</h2>
            <div id="songList" class="space-y-2">
                <p class="text-gray-400">読み込み中...</p>
            </div>
        </div>
        
        <div id="errorDisplay" class="bg-red-900 rounded-lg p-4 mt-6 hidden">
            <h3 class="font-bold">エラー情報:</h3>
            <pre id="errorText" class="text-sm mt-2"></pre>
        </div>
        
        <div id="debugInfo" class="bg-blue-900 rounded-lg p-4 mt-6">
            <h3 class="font-bold">デバッグ情報:</h3>
            <pre id="debugText" class="text-sm mt-2"></pre>
        </div>
    </main>

    <script>
        async function testDisplay() {
            try {
                document.getElementById('debugText').textContent = 'API呼び出し開始...';
                
                const response = await fetch('https://neon-vj-setlist-api.netlify.app/.netlify/functions/test-display');
                
                document.getElementById('debugText').textContent += `\nStatus: ${response.status}`;
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                document.getElementById('debugText').textContent += `\nレスポンス取得成功`;
                document.getElementById('debugText').textContent += `\nイベント名: ${data.event.name}`;
                document.getElementById('debugText').textContent += `\n楽曲数: ${data.songs.length}`;
                
                // イベント情報表示
                document.getElementById('eventName').textContent = data.event.name;
                document.getElementById('songCount').textContent = `${data.songs.length}曲`;
                
                // 楽曲リスト表示
                const songListHtml = data.songs.map(song => 
                    `<div class="bg-gray-700 p-3 rounded">
                        <div class="font-medium">${song.title} / ${song.artist}</div>
                        <div class="text-sm text-gray-400">DJ: ${song.dj_name}</div>
                    </div>`
                ).join('');
                
                document.getElementById('songList').innerHTML = songListHtml;
                
                document.getElementById('debugText').textContent += '\n✅ 表示完了!';
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('errorDisplay').classList.remove('hidden');
                document.getElementById('errorText').textContent = error.toString();
                document.getElementById('debugText').textContent += `\n❌ エラー: ${error.message}`;
            }
        }
        
        // ページロード時に実行
        window.addEventListener('DOMContentLoaded', testDisplay);
    </script>
</body>
</html>